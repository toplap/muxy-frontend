(this["webpackJsonpmuxy-frontend"]=this["webpackJsonpmuxy-frontend"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(6),o=n.n(c),s=(n(12),n(2)),i=(n(13),n(14),n(0));var l=function(e){var t=e.eventUrl,n=e.startsAt,a=e.endsAt,c=Object(r.useState)(""),o=Object(s.a)(c,2),l=o[0],u=o[1],d=Object(r.useState)(""),m=Object(s.a)(d,2),j=m[0],b=m[1],h=Object(r.useState)(""),p=Object(s.a)(h,2),O=p[0],f=p[1],v=Object(r.useState)(""),y=Object(s.a)(v,2),x=y[0],g=y[1],S=Object(r.useState)(""),C=Object(s.a)(S,2),N=C[0],A=C[1];return Object(i.jsxs)(i.Fragment,{children:[x&&Object(i.jsxs)("div",{children:[Object(i.jsxs)("p",{children:["You have successfully registered for the event. Your streamkey is ",Object(i.jsx)("b",{children:x})," "]}),Object(i.jsx)("p",{children:"You should have received this as an email too. "}),Object(i.jsx)("p",{children:"Save this key well, you will need it for the event and also to delete your slot again. "}),Object(i.jsx)("p",{children:"When this page is reloaded, the key will no longer be displayed. "})]}),!x&&Object(i.jsxs)("form",{className:"PerformanceCreateForm",onSubmit:function(e){e.preventDefault(),fetch("".concat("https://muxy.tidalcycles.org","/streams/"),{method:"post",headers:new Headers({Authorization:"Api-Key ".concat("S4b965QU.UuQmHexKmvXjVlFtOSUCWqxDNblqgHaq"),"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify({publisher_name:l,publisher_email:j,description:O,location:N,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,event:t,starts_at:n,ends_at:a})}).then((function(e){return e.json()})).then((function(e){g(e.key)})).catch(console.error)},children:[Object(i.jsx)("input",{id:"name",type:"text",placeholder:"Name",value:l,onChange:function(e){return u(e.target.value)},required:!0}),Object(i.jsx)("input",{id:"email",type:"text",placeholder:"E-Mail",value:j,onChange:function(e){return b(e.target.value)},required:!0}),Object(i.jsx)("input",{id:"description",type:"text",placeholder:"Description",value:O,onChange:function(e){return f(e.target.value)},required:!0}),Object(i.jsx)("input",{id:"location",type:"text",placeholder:"Location",value:N,onChange:function(e){return A(e.target.value)},required:!0}),Object(i.jsx)("input",{type:"submit",className:"card-button",value:"Rave On"})]})]})};var u=function(e){var t=e.streamUrl,n=e.onRemove,a=Object(r.useState)(""),c=Object(s.a)(a,2),o=c[0],l=c[1],u=Object(r.useState)(!1),d=Object(s.a)(u,2),m=d[0],j=d[1];return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("form",{className:"PerformanceCreateForm",onSubmit:function(e){e.preventDefault(),j(!1);var r=new Headers({Authorization:"Api-Key ".concat("S4b965QU.UuQmHexKmvXjVlFtOSUCWqxDNblqgHaq"),"X-Stream-Key":o,"Content-Type":"application/json",Accept:"application/json"});fetch(t,{method:"DELETE",headers:r}).then((function(e){e.ok?(l(""),n&&n()):j(!0)})).catch((function(e){console.error(e),j(!0)}))},children:[Object(i.jsx)("p",{children:"Enter your streaming key to confirm you want to remove your slot. If you do not remember your streaming key, please contact the event organizer."}),m&&Object(i.jsx)("p",{style:{color:"red"},children:"Something went wrong, did you entered the incorrect stream key? Please try again."}),Object(i.jsx)("input",{id:"key",type:"text",placeholder:"Stream key",value:o,onChange:function(e){return l(e.target.value)},required:!0}),Object(i.jsx)("input",{type:"submit",className:"card-button",value:"Remove slot"})]})})},d=n(3),m=n(5);var j=function(e){var t=e.streamUrl,n=e.currMuxyStream,a=e.onSetInEditMode,c=e.setCurrMuxyStream,o=Object(r.useState)(n.publisher_name),l=Object(s.a)(o,2),u=l[0],d=l[1],j=Object(r.useState)(n.description),b=Object(s.a)(j,2),h=b[0],p=b[1],O=Object(r.useState)(""),f=Object(s.a)(O,2),v=f[0],y=f[1],x=Object(r.useState)(n.location),g=Object(s.a)(x,2),S=g[0],C=g[1],N=Object(r.useState)(!1),A=Object(s.a)(N,2),H=A[0],U=A[1];return Object(i.jsx)("div",{className:"PerformanceEditForm",children:Object(i.jsxs)("form",{className:"PerformanceCreateForm",onSubmit:function(e){e.preventDefault(),U(!1);var r=new Headers({Authorization:"Api-Key ".concat("S4b965QU.UuQmHexKmvXjVlFtOSUCWqxDNblqgHaq"),"X-Stream-Key":v,"Content-Type":"application/json",Accept:"application/json"}),o=JSON.stringify({publisher_name:u,description:h,location:S,ends_at:n.ends_at,starts_at:n.starts_at,event:n.event});fetch(t,{method:"PUT",headers:r,body:o}).then((function(e){e.ok?(y(""),a(!1),c(Object(m.a)(Object(m.a)({},n),{},{publisher_name:u,description:h,location:S}))):U(!0)})).catch((function(e){console.error(e),U(!0)}))},children:[Object(i.jsx)("p",{children:"Enter your streaming key to confirm you want to edit your slot. If you do not remember your streaming key, please contact the event organizer."}),H&&Object(i.jsx)("p",{style:{color:"red"},children:"Something went wrong, did you entered the incorrect stream key? Please try again."}),Object(i.jsx)("input",{id:"key",type:"text",placeholder:"Stream-Key",value:v,onChange:function(e){return y(e.target.value)},required:!0}),Object(i.jsx)("p",{children:"Here you find your stream information that you can edit. The email address can not displayed for security reasons. If you have problems with your e-mail adress, please contace the event organizer. The information will only be updated if you have entered the correct stream key."}),Object(i.jsx)("input",{id:"name",type:"text",placeholder:"Name",value:u,onChange:function(e){return d(e.target.value)},required:!0}),Object(i.jsx)("input",{id:"description",type:"text",placeholder:"Description",value:h,onChange:function(e){return p(e.target.value)},required:!0}),Object(i.jsx)("input",{id:"location",type:"text",placeholder:"Location",value:S,onChange:function(e){return C(e.target.value)},required:!0}),Object(i.jsx)("input",{type:"submit",className:"card-button",value:"Save"})]})})},b=function(e){var t=e.muxyStream,n=e.cycleNo,a=e.eventUrl,c=Object(r.useState)(!1),o=Object(s.a)(c,2),m=o[0],b=o[1],h=Object(r.useState)(t),p=Object(s.a)(h,2),O=p[0],f=p[1],v=Object(r.useState)(!1),y=Object(s.a)(v,2),x=y[0],g=y[1],S=Object(r.useState)(!1),C=Object(s.a)(S,2),N=C[0],A=C[1],H=Object(r.useState)(!1),U=Object(s.a)(H,2),_=U[0],T=U[1],q=d.DateTime.fromISO(t.starts_at).toFormat("HH:mm LLL dd"),F=d.DateTime.fromISO(t.ends_at).toFormat("HH:mm LLL dd"),k=null;"publisher_name"in O&&(k=[O.publisher_name,O.location,O.description,O.timezone].join(" / "));var L=function(){b(!1),g(!1),A(!1)};return Object(i.jsx)("div",{className:"card",children:Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsxs)("p",{className:"card-header",children:["Cycle #",n]}),Object(i.jsxs)("p",{className:"card-time",children:[q,"-",F," ",!m&&!k&&Object(i.jsx)("button",{className:"card-button-plus",onClick:function(){return b(!0)},children:"+"})]}),_&&Object(i.jsx)("p",{children:"You have removed your slot succesfully."}),m?Object(i.jsx)(l,{eventUrl:a,startsAt:O.starts_at,endsAt:O.ends_at}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("p",{className:"card-text",children:_?"":k||""}),!_&&k&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("button",{onClick:function(){L(),A((function(e){return!e}))},className:"card-button",children:"Edit"}),Object(i.jsx)("button",{onClick:function(){L(),g((function(e){return!e}))},className:"card-button",children:"Remove"}),N&&"url"in O&&Object(i.jsx)(j,{streamUrl:O.url,currMuxyStream:O,onSetInEditMode:A,setCurrMuxyStream:f}),x&&"url"in O&&Object(i.jsx)(u,{streamUrl:O.url,onRemove:function(){return T(!0)}})]})]}),Object(i.jsx)("hr",{})]})})},h=function(e){var t=e.slug,n=e.eventUrl,a=e.startsAt,c=e.endsAt,o=e.setReservedStreamCount,l=e.setTotalStreamCount,u=Object(r.useState)(null),m=Object(s.a)(u,2),j=m[0],h=m[1];Object(r.useEffect)((function(){fetch("".concat("https://muxy.tidalcycles.org","/streams/?event__slug=").concat(t),{method:"get",headers:new Headers({Authorization:"Api-Key ".concat("S4b965QU.UuQmHexKmvXjVlFtOSUCWqxDNblqgHaq")})}).then((function(e){return e.json()})).then((function(e){h(e)})).catch(console.error)}),[t]);var p=Object(r.useMemo)((function(){if(!a||!c)return[];if(!j)return[];var e=d.DateTime.fromISO(a),t=d.DateTime.fromISO(c).diff(e,["minute"]).toObject(),n=(null===t||void 0===t?void 0:t.minutes)?t.minutes/15:0,r=(null===j||void 0===j?void 0:j.results)||[];return Array.from(Array(n)).map((function(t,n){var a=e.plus({minutes:15*n}),c=a.plus({minutes:15}),o=a.toUTC().toFormat("yyyy-MM-dd'T'HH:mm:ss'Z'"),s=c.toUTC().toFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");return r.find((function(e){return e.starts_at==o&&e.ends_at==s}))||{starts_at:o,ends_at:s}}))}),[j]);return o(j?j.results.length:0),l(p?p.length:0),Object(i.jsx)("div",{className:"performance-list",children:p&&p.map((function(e,t){return Object(i.jsx)(b,{eventUrl:n,muxyStream:e,cycleNo:t+1},t)}))})},p=n.p+"static/media/longestnight-sunset-2.0.74a19890.svg",O=n(7),f=n.n(O);var v=function(e){var t=e.event,n=function(e,t){return null===e||null===t?{reserved:0,total:0,percent:0}:{reserved:e,total:t,percent:100*e/t}}(e.reservedStreamCount,e.totalStreamCount);return Object(i.jsxs)("header",{className:"App-header",children:[Object(i.jsx)("img",{src:p,className:"App-logo",alt:"logo"}),Object(i.jsx)("h4",{children:"TOPLAP Presents ..."}),Object(i.jsx)("h1",{children:"TOPLAP20 Live Stream"}),Object(i.jsxs)("h2",{children:[" ",t&&d.DateTime.fromISO(t.starts_at).toFormat("dd. LLLL HH:mm")," - ",t&&d.DateTime.fromISO(t.ends_at).toFormat("dd. LLLL HH:mm")," ",t&&d.DateTime.fromISO(t.starts_at).toFormat("yyyy")]}),"Note: This is event is not yet open for slot registration. Slot registration opens Monday, Feb 12th.",Object(i.jsx)("hr",{}),Object(i.jsx)(f.a,{className:"wrapper",bgColor:"#a9c27c",baseBgColor:"#ffffff",labelClassName:"label",labelAlignment:"outside",width:"100%",height:"28px",margin:"8px",customLabel:"".concat(n.reserved,"/").concat(n.total," slots are filled"),completed:n.percent}),Object(i.jsx)("hr",{}),Object(i.jsxs)("p",{children:["Your timezone: ",Intl.DateTimeFormat().resolvedOptions().timeZone]}),Object(i.jsx)("p",{className:"link-paragraph",children:Object(i.jsxs)("b",{children:["Watch live here >>> ",Object(i.jsx)("a",{href:"https://eulerroom.com",children:"https://eulerroom.com/"})]})})]})};var y=function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),o=Object(s.a)(c,2),l=o[0],u=o[1],d=Object(r.useState)(null),m=Object(s.a)(d,2),j=m[0],b=m[1],p="latesolstice2023";Object(r.useEffect)((function(){fetch("".concat("https://muxy.tidalcycles.org","/events/?slug=").concat(p),{method:"get",headers:new Headers({Authorization:"Api-Key ".concat("S4b965QU.UuQmHexKmvXjVlFtOSUCWqxDNblqgHaq")})}).then((function(e){return e.json()})).then((function(e){a(e)})).catch(console.error)}),[p]);var O=null===n||void 0===n?void 0:n.results[0];return Object(i.jsxs)("main",{className:"App",children:[Object(i.jsx)(v,{event:O,reservedStreamCount:l,totalStreamCount:j}),O&&Object(i.jsx)(h,{slug:O.slug,eventUrl:O.url,startsAt:O.starts_at,endsAt:O.ends_at,setReservedStreamCount:u,setTotalStreamCount:b})]})};var x=function(){return Object(i.jsx)(y,{})};o.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(x,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.179b096b.chunk.js.map